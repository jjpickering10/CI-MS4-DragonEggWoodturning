{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="product-container">
<div class="product-item-container">
  <div class="product-card">
    <div class="product-card-image">
        {% if product.image_set.all|length > 0 %}
          <img src="{{ product.image_set.first.image.url }}" alt="">
        {% else %}
          <img src="{{ MEDIA_URL }}noimage.png">
        {% endif %}
    </div>
    <div class="product-card-content">
      <div class="product-card-title">
        <h3>{{ product.name }}</h3>
      </div>
      <div class="product-price">
        <h2>Â£ {{ product.price }}</h2>
        <div class="product-rating">
          {% if product.rating %}
          <h4>{{ product.rating }}</h4>
          {% else %}
          <h4>No ratings yet.</h4>
          {% endif %}
        </div>
      </div>
      <p class="individual-category"><i class="fas fa-sort"></i> | {{ product.category.friendly_name }}</p>
      {% for woodtype in product.wood_type.all %}
        <p class="individual-woodtype"><i class="fas fa-tag"></i> | {{ woodtype.friendly_name }}</p>
      {% endfor %}
    </div>
  </div>
    <div class="product-card-description">
      <p>{{ product.description }}</p>
      <form action="{% url 'add_to_bag' product.id %}" method="POST">
        {% csrf_token %}
        <p>
          <input type="range" id="product-range" name="quantity" value ="1" min="1" max="10" data-item_id="{{ product.id }}" />
          <p>Quantity: <span id="product-value"></span></p>
        </p>
        <div class="add-to-bag-buttons">
          <a class="global-button" href="{% url 'all_products' %}"> Keep Shopping</a>
          <input class="global-button" type="submit" value="Add to Bag">
          <input type="hidden" name="redirect_url" value="{{ request.path }}">
        </div>
      </form>
      {{ review_form }}
    </div>
    
</div>
</div>
{% endblock %}

{% block extra_js %}
<!-- Taken from https://www.w3schools.com/howto/howto_js_rangeslider.asp -->
<script>
  const slider = document.getElementById("product-range");
  const output = document.getElementById("product-value");
  output.innerHTML = slider.value;
  
  slider.oninput = function() {
    output.innerHTML = this.value;
  }
  </script>
{% endblock %}